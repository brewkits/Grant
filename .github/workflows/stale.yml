name: Stale Issues and PRs

on:
  schedule:
    - cron: '0 0 * * *' # Daily at midnight UTC
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest

    steps:
      - name: Mark stale issues and PRs
        uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}

          # Issues
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,security,bug'
          stale-issue-message: >
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs within 14 days.
            If this is still relevant, please leave a comment to keep it open.
          close-issue-message: >
            This issue was automatically closed due to inactivity. If you believe this issue
            is still relevant, please reopen it or create a new issue with updated information.

          # Pull Requests
          days-before-pr-stale: 30
          days-before-pr-close: 14
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security,work-in-progress'
          stale-pr-message: >
            This pull request has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs within 14 days.
            Please update the PR or leave a comment to keep it open.
          close-pr-message: >
            This pull request was automatically closed due to inactivity. If you would like
            to continue this work, please reopen the PR or create a new one.

          # Operations
          operations-per-run: 30
          remove-stale-when-updated: true
          ascending: true
